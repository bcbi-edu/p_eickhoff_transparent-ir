(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,a){e.exports=a(310)},115:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(102),s=a.n(i),l=(a(115),a(42)),o=a(43),c=a(48),u=a(44),h=a(47),d=a(4),m=a(46),p=a(103);function v(e,t){for(var a=0,n=0;n<t.length;n++){var r=t[n].weights,i=0;for(var s in r)i+=r[s],i+=Math.abs(Math.round(100*r[s])/100);a=Math.max(a,i)}var l={scales:{xAxes:[{stacked:!0,ticks:{beginAtZero:!0,max:Math.ceil(a),display:!1},gridLines:{display:!1,show:!1,color:"transparent"}}],yAxes:[{stacked:!0,gridLines:{display:!1,show:!1,color:"transparent"}}]},maintainAspectRatio:!1,legend:{display:!1,onClick:function(e){return e.stopPropagation()}},tooltips:{enabled:!0,mode:"nearest"}};return 0===e&&(l.legend.display=!0),l}function f(e,t,a){var n=[],r=e.replace(/\b[-.,()&$#?!\]{}"']+\B|\B[-.,()&$#!?\]{}"']+\b/g,"").trim().split(" ");r=Object(m.a)(new Set(r));for(var i=0;i<r.length;i++)if(" "!==r[i]&&""!==r[i]){var s=r[i].toLowerCase();n.push({label:s,data:[Math.abs(Math.round(100*t[r[i]])/100)],backgroundColor:[a[s]],borderColor:["rgba(0,0,0,0)"],borderWidth:2})}return{datasets:n}}var b=a(26),g=a.n(b),k=(a(90),a(313)),y=a(312),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleDescription=function(e){return function(t){var n=e.split(" . "),r=function(e){return e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ")}(n[0]),i=function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a].trim();t.push(n.charAt(0).toUpperCase()+n.slice(1))}return t}(n.slice(2,-1)).join(". ")+".";a.setState({isResults:!1,title:r,text:i}),t.preventDefault()}},a.handleFavorites=function(e){return function(t){var n=a.state.links;n.has(e)?n.delete(e):n.add(e),a.setState({links:n}),t.preventDefault()}},a.state={value:"",colors:a.getRandomColor(""),submitted:!1,data:[],lastQuery:"",isResults:!0,title:"",text:"",links:new Set},a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.handleDescription=a.handleDescription.bind(Object(d.a)(Object(d.a)(a))),a.handleBack=a.handleBack.bind(Object(d.a)(Object(d.a)(a))),a.handleFavorites=a.handleFavorites.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this,a=this.state.value,n=this.getRandomColor(a);g.a.get("http://localhost:8080/search?name=".concat(this.state.value)).then(function(e){var r=e.data.data,i=e.data.descriptions;t.setState({data:t.updateJson(r,i),submitted:!0,colors:n,lastQuery:a,isResults:!0,desc:""}),r==={}&&t.setState({submitted:!1})}),e.preventDefault()}},{key:"handleBack",value:function(e){this.setState({isResults:!0,title:"",text:""}),e.preventDefault()}},{key:"getStarStyles",value:function(e){return this.state.links.has(e)?"warning":"primary"}},{key:"renderButton",value:function(e){if(""!==e)return r.a.createElement(k.a,{onClick:this.handleFavorites(e),bsStyle:this.getStarStyles(e),bsSize:"xsmall"},r.a.createElement(y.a,{glyph:"star"}))}},{key:"renderResults",value:function(){var e=this;return 1===this.state.data.length?r.a.createElement("ul",{className:"search-results"},r.a.createElement("li",{key:0},r.a.createElement("section",{className:"container"},r.a.createElement("div",{className:"noResult"},r.a.createElement("p",null,"No results found"))))):this.state.isResults?r.a.createElement("ul",{className:"search-results"},this.state.data.map(function(t){return r.a.createElement("li",{key:t.id},r.a.createElement("section",{className:"container"},r.a.createElement("div",{className:"star"},e.renderButton(t.title)),r.a.createElement("div",{className:"one"},r.a.createElement("p",{className:"results",onClick:e.handleDescription(t.description)},t.title),r.a.createElement("p",null,t.description.replace(/(([^\s]+\s\s*){50})(.*)/,"$1\u2026"))),r.a.createElement("div",{className:"two"},r.a.createElement(p.a,{data:f(e.state.lastQuery,t.weights,e.state.colors),options:v(t.id,e.state.data),width:.1,height:(a=t.id,0===a?100:55)})),r.a.createElement("div",{className:"clear"})));var a})):r.a.createElement("div",{className:"text-container"},r.a.createElement("button",{onClick:this.handleBack},"Back"),r.a.createElement("h3",null,this.state.title),r.a.createElement("p",null,this.state.text))}},{key:"updateJson",value:function(e,t){var a=e,n=[],r=1,i=[],s=0;for(var l in a){var o=a[l],c=0;for(var u in o)o[u]=Math.abs(Math.round(100*o[u])/100),c+=o[u];i.push([l,c,t[s]]),s++}i.sort(function(e,t){return t[1]-e[1]});for(var h=0;h<i.length;h++)n.push({id:r++,title:i[h][0],description:i[h][2],weights:a[i[h][0]]});return n.unshift({id:0,title:"",description:"",weights:{}}),n}},{key:"getRandomColor",value:function(e){var t={},a=e.toLowerCase().split(" ");a=Object(m.a)(new Set(a));for(var n=0;n<a.length;n++){var r=Math.round(255*Math.random()),i=Math.round(255*Math.random()),s=Math.round(255*Math.random());t[a[n]]="rgba("+r+","+i+","+s+",1)"}return t}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"search"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,r.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange,style:{width:"400px",height:"25px"}})),r.a.createElement("input",{type:"submit",value:"Search",style:{width:"75px",height:"25px"}}))),this.state.submitted&&this.renderResults())}}]),t}(r.a.Component),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(d.a)(Object(d.a)(a))),a.startTime=null,a.ref=r.a.createRef(),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=new Date;console.log("START TIME",e),this.setState({startTime:e})}},{key:"handleClick",value:function(e){var t=this,a="none";g.a.get("https://ir-sim.herokuapp.com/id").then(function(e){a=e.data;var n=new Date,r=Math.abs(n-t.state.startTime),i=Array.from(t.ref.current.state.links),s={id:a,links:i};console.log(i),window.confirm("Are you finished with the study? (After you hit confirm, you are not allowed to return back to this page)")&&(console.log(s),g.a.post("https://ir-sim.herokuapp.com/links",s).then(function(e){window.location="/exit-form?id=".concat(a,"&time=").concat(r)}))}),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("h1",{className:"title"},"Search Engine"),r.a.createElement("button",{onClick:this.handleClick},"Finished with Study"),r.a.createElement(w,{ref:this.ref}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,a){}},[[110,2,1]]]);
//# sourceMappingURL=main.06a50fbb.chunk.js.map